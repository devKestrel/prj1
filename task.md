# Task Plan

이 문서는 `prd.md` 요구사항을 기반으로 한 실행 보드입니다. 완료된 작업은 체크했고, 다음 우선순위를 아래에 정리했습니다.

## 완료됨 (MVP 범위)
- [x] 모노레포 초기화: pnpm 워크스페이스, `apps/*`, `packages/*`
- [x] 서버 스켈레톤: Express + Socket.IO, `GET /health`
- [x] 레이스 엔진 스텁: 시드 PRNG, 10마리, 순위/기록 산출
- [x] 베팅/배당/정산: 파리뮤추얼 풀, 하우스컷, 정산 API
- [x] NPC 베팅 3종 전략(보수/밸런스/공격) + 엔드포인트
- [x] API 라우터/문서: `/api/races`, `/api/bets`, `/api/odds`, `/api/config`, `/settle`
- [x] 클라이언트 스캐폴딩(React+Vite) + 로비/베팅/레이스/결과 흐름
- [x] 배경 적용: 캔버스/베팅 화면 트랙 배경
- [x] 초기 배당(개장가) 스무딩: 가상 풀 도입
- [x] 말 도형/러닝 애니메이션(갈기·꼬리·다리, 안장 번호)
- [x] 결승 동시도착 방지 및 완주 보장(말별 시간/워블, 감쇠)

## 진행/다음 단계 (P0)
- [ ] 실시간 진행 동기화: 서버 시뮬 타임라인 → Socket.IO 브로드캐스트 → 클라 반영
- [ ] 영속화 전환: SQLite 스키마(레이스/베팅/결과/로그) 및 DAO
- [ ] 베팅 검증 강화: 한도/최소금액/마감 처리, 오류 코드/메시지 정교화
- [ ] 로그/공정성: 시드·이벤트 기록, 리플레이용 데이터 스냅샷
- [ ] 테스트: 배당/정산/엔진/API 유닛 테스트(커버리지 80%)

## P1 개선
- [ ] 리플레이 모드 UI/컨트롤
- [ ] 즐겨찾기/차명 및 말 프로필 카드
- [ ] Electron 패키징(데스크톱 빌드)
- [ ] 경고/쿨다운/일일 한도 등 규제 UI
- [ ] 캔버스 성능/연출(패럴랙스·관중석·레일·스프라이트)

## 명령 요약
- 설치: `pnpm i`
- 서버: `pnpm -C apps/server dev`
- 클라이언트: `pnpm -C apps/client dev`
- 워크스페이스 빌드/테스트: `pnpm -r build` / `pnpm -r test`
